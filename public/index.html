<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Workout Visualizer</title>
    <link rel="stylesheet" href="/app.css" />
    <!-- React + Babel (dev only, no build step) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- PapaParse for client-side CSV parsing -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <!-- Firebase Analytics: initialize via ES module (uses the provided measurementId) -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';

      const firebaseConfig = {
        apiKey: "AIzaSyBwOD2Vy-nwr8rs-F8NqMB6AK5iK-JoW5s",
        authDomain: "workout-progression-visulizer.firebaseapp.com",
        projectId: "workout-progression-visulizer",
        storageBucket: "workout-progression-visulizer.firebasestorage.app",
        messagingSenderId: "555087733477",
        appId: "1:555087733477:web:84edf445cfbe85be7dea0c",
        measurementId: "G-H32MG6MK8N"
      };

      try {
        const app = initializeApp(firebaseConfig);
        // getAnalytics may throw if run in unsupported environments (e.g. file://)
        const analytics = getAnalytics(app);
        console.log('Firebase Analytics initialized successfully');
      } catch (e) {
        console.warn('Firebase analytics not initialized:', e && e.message ? e.message : e);
      }
    </script>
  </head>
  <body>
    <div id="root"></div>

    <!-- Simple in-page error overlay to surface JS errors when the screen is blank -->
    <div id="__err" style="position:fixed;left:12px;right:12px;top:12px;z-index:9999;display:none;padding:12px;border-radius:8px;background:#2b021f;color:#ffd1e8;font-family:monospace;white-space:pre-wrap;"></div>
    <script>
      window.addEventListener('error', function(e){
        var el = document.getElementById('__err');
        el.style.display = 'block';
        el.textContent = 'Error: ' + (e && e.message ? e.message : String(e));
      });
      window.addEventListener('unhandledrejection', function(e){
        var el = document.getElementById('__err');
        el.style.display = 'block';
        el.textContent = 'Unhandled promise rejection: ' + (e && e.reason ? (e.reason.message || String(e.reason)) : String(e));
      });
    </script>

    <!-- App code (JSX compiled by Babel in the browser) -->
    <!-- Add data-presets on the external script so Babel knows to transform JSX -->
    <script type="text/babel" data-presets="react" src="/app.jsx"></script>
  </body>
</html>
